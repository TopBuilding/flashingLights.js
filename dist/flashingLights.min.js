/*
 *  flashingLights.js
 *  Giving your html a casino feel
 *
 *  Made by Kyle Birnbaum(greenrazer)
 */
 !function(e){e.fn.lightUp=function(n){function r(e){return"top"===s.align?0:"bottom"===s.align?e*(s.amountPerScreen-1):e*(s.amountPerScreen/2)-e/2}function a(n){var a=n.height(),t=n.children().length;n.css("overflow","hidden"),n.height(a);var i=a/s.amountPerScreen;n.children().each(function(){e(this).height(i),e(this).addClass(s.className),e(this).css("background-color",s.colors[s.randomNumberGenerator(0,s.colors.length)])}),n.children().wrapAll("<div/>");var l=r(i);n.children().css("margin-top",l-a);var o=0,c=s.amountPerScreen-t;0===c||1===Math.abs(c)?o=1:c>1&&(o=c),o=Math.ceil(o/s.amountPerScreen);for(var d=n.children(),h=d.children(),m=0;m<o;m++)h.clone(!0).prependTo(d).removeClass(s.className),h.clone(!0).appendTo(d).removeClass(s.className);return{tiles:t,extraTiles:o*s.amountPerScreen,addedMargin:l}}function t(e,n){for(var r=e.children(),a=r.children("."+s.className),t=a.length,i=0;i<n/t;i++)a.clone(!0).appendTo(r).addClass(s.deleteClassName)}function i(n){var r=e.extend({animation:"linear"},n),a=r.me.children().children("."+s.className+":first").height()*(r.tiles+r.pos+r.extraTiles)-r.addedMargin;r.me.children().animate({"margin-top":"-"+a+"px"},500,r.animation,function(){o(r.me,r.pos,r.extraTiles,r.addedMargin),l(r.me),r.callback&&r.callback(r.pos)})}function l(e){e.children().children("."+s.deleteClassName).remove()}function o(e,n,r,a){var t=e.children().children("."+s.className+":first").height()*(n+r)-a;e.children().css("margin-top",-t)}function c(e,n,r,a,l,o){var n=n||s.randomNumberGenerator(0,r),c=s.randomNumberGenerator(3,10)*r;return t(e,c),i({me:e,tiles:c,extraTiles:a,pos:n,addedMargin:l,callback:o}),n}var s=e.extend({type:"slot",colors:["blue","green","red","yellow"],amountPerScreen:1,deleteClassName:"_dltl8er",className:"_r34l",randomNumberGenerator:function(e,n){return Math.floor(Math.random()*(n-e))+e},align:"center"},n),d=this.filter("div");if("slot"===s.type){if(1===d.length){var h=a(d);return{spin:function(n){var r=e.extend({to:s.randomNumberGenerator(0,h.tiles),done:void 0},n);c(d,r.to,h.tiles,h.extraTiles,h.addedMargin,function(e){r.done&&r.done(e)})}}}var m=[];return d.each(function(){m.push(a(e(this)))}),{spin:function(n){var r=e.extend({},n),a=[],t=0;d.each(function(){var n=r.to||s.randomNumberGenerator(0,m[t].tiles);a.push(c(e(this),n,m[t].tiles,m[t].extraTiles,m[t].addedMargin)),t++});var i=setInterval(function(){d.children().is(":animated")||(clearInterval(i),r.done&&r.done(a))},100)}}}}}(jQuery);